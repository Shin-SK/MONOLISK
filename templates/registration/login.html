{% load static i18n %}
<!DOCTYPE html>
<html lang="ja" class="jazzmin-login-page">
<head>
    <meta charset="utf-8">
    <title>{% trans "Log in" %} | MONOLISK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {# ▼ Jazzmin が collectstatic 済みのファイルを読む #}
    <link rel="stylesheet" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'vendor/fontawesome-free/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'vendor/adminlte/css/adminlte.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/jazzmin_custom.css' %}">
</head>

<body class="jazzmin-login-page">
    <div class="login-box min-w-100 w-100 min-vh-100 d-flex flex-fill justify-content-center align-items-center">

        <div class="wrap d-flex flex-column align-items-center justify-content-center">

            {# ───────── ロゴ ───────── #}
            <div class="login-logo">
                <h1 class="m-0">
                    <picture>
                        <source srcset="{% static 'img/logo.webp' %}" media="(prefers-color-scheme: dark)">
                        <img src="{% static 'img/logo.webp' %}" alt="MONOLISK 管理">
                    </picture>
                </h1>
            </div>

            {# ──────── ログインカード ──────── #}
            <div class="card">
                <div class="card-body">

                    {# ▼ バリデーションエラー（ID/PASS NG など）があれば表示 #}
                    {% if form.errors %}
                        <div class="alert alert-danger" role="alert">
                            {% trans "ユーザー名またはパスワードが正しくありません。" %}
                        </div>
                    {% endif %}

                    <form action="" method="post" novalidate>
                        {% csrf_token %}

                        <div class="form-group">
                            <label for="id_username" class="sr-only">{% trans "Username" %}</label>
                            <input type="text"
                                   name="username"
                                   id="id_username"
                                   class="form-control {% if form.username.errors %}is-invalid{% endif %}"
                                   placeholder="{% trans 'ユーザー名' %}"
                                   value="{{ form.username.value|default_if_none:'' }}"
                                   autofocus required>
                        </div>

                        <div class="form-group">
                            <label for="id_password" class="sr-only">{% trans "Password" %}</label>
                            <input type="password"
                                   name="password"
                                   id="id_password"
                                   class="form-control {% if form.password.errors %}is-invalid{% endif %}"
                                   placeholder="{% trans 'パスワード' %}"
                                   required>
                        </div>

                        {# next パラメータ（認証後の遷移先）を保持 #}
                        {% if next %}
                            <input type="hidden" name="next" value="{{ next }}">
                        {% endif %}

                        <button type="submit" class="btn btn-primary btn-block">
                            <i class="fas fa-sign-in-alt mr-1"></i>{% trans "ログイン" %}
                        </button>
                    </form>

                </div>
            </div>

        </div>
    </div>

    {# ▼ 必須 JS（Jazzmin / AdminLTE が期待するものだけ） #}
    <script src="{% static 'admin/js/vendor/jquery/jquery.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'vendor/adminlte/js/adminlte.min.js' %}"></script>
</body>
</html>
